<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Mysql数据库 | CodeLorin's Blog</title><meta name="keywords" content="数据库,Mysql,JDBC"><meta name="author" content="CodeLorin"><meta name="copyright" content="CodeLorin"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="1.数据库介绍 数据库是安装在操作系统,可以系统性的存储大量数据的软件. 作用:存储数据,管理数据  2.数据库的分类 SQL 关系型数据库  Mysql ,Ocacle,Sql Server,DB2,SQLite 通过表和表,列和列的关系进行数据的存储   NOSQL 非关系型数据库  Redis,MongDB 非关系型数据库,对象存储,类型JSON或者字典方式存储数据    3.命令行初见My">
<meta property="og:type" content="article">
<meta property="og:title" content="Mysql数据库">
<meta property="og:url" content="https://www.codelorin.cn/posts/c40ae4b5eafd/index.html">
<meta property="og:site_name" content="CodeLorin&#39;s Blog">
<meta property="og:description" content="1.数据库介绍 数据库是安装在操作系统,可以系统性的存储大量数据的软件. 作用:存储数据,管理数据  2.数据库的分类 SQL 关系型数据库  Mysql ,Ocacle,Sql Server,DB2,SQLite 通过表和表,列和列的关系进行数据的存储   NOSQL 非关系型数据库  Redis,MongDB 非关系型数据库,对象存储,类型JSON或者字典方式存储数据    3.命令行初见My">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/CodeLorin/img@master/20210425/xxx.17r1ntktik1s.jpg">
<meta property="article:published_time" content="2021-04-28T15:29:38.000Z">
<meta property="article:modified_time" content="2021-04-30T16:38:38.041Z">
<meta property="article:author" content="CodeLorin">
<meta property="article:tag" content="数据库">
<meta property="article:tag" content="Mysql">
<meta property="article:tag" content="JDBC">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/CodeLorin/img@master/20210425/xxx.17r1ntktik1s.jpg"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/CodeLorin/img@master/20210425/xxx.6b4667utjuc0.jfif"><link rel="canonical" href="https://www.codelorin.cn/posts/c40ae4b5eafd/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?1e86e6a410fd5fc17ec476966001c29d";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"top-center"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-05-01 00:38:38'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><link rel="stylesheet" href="/css/gd.css"><link rel="stylesheet" href="/css/subiao.css"><link rel="stylesheet" href="/css/custom.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper/swiper/swiper.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper/swiper/swiperstyle.css"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="CodeLorin's Blog" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" data-lazy-src="https://cdn.jsdelivr.net/gh/CodeLorin/img@master/20210425/xxx.6b4667utjuc0.jfif" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">16</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">30</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">26</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-window-maximize"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/plan/"><i class="fa-fw fab far fa-check-circle"></i><span> 计划</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://codelorin.gitee.io/"><i class="fa-fw fa fa-location-arrow"></i><span> 镜像站</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-clone"></i><span> 文章</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 功能</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://codelorin.gitee.io/blog-img/"><i class="fa-fw fa fa-podcast"></i><span> 图床</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/CodeLorin/img@master/20210425/xxx.17r1ntktik1s.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">CodeLorin's Blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-window-maximize"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/plan/"><i class="fa-fw fab far fa-check-circle"></i><span> 计划</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://codelorin.gitee.io/"><i class="fa-fw fa fa-location-arrow"></i><span> 镜像站</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-clone"></i><span> 文章</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 功能</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://codelorin.gitee.io/blog-img/"><i class="fa-fw fa fa-podcast"></i><span> 图床</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Mysql数据库</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-04-28T15:29:38.000Z" title="发表于 2021-04-28 23:29:38">2021-04-28</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-04-30T16:38:38.041Z" title="更新于 2021-05-01 00:38:38">2021-05-01</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/Mysql/">Mysql</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>26分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Mysql数据库"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/posts/c40ae4b5eafd/#post-comment"><span id="twikoo-count"></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="1-数据库介绍"><a href="#1-数据库介绍" class="headerlink" title="1.数据库介绍"></a>1.数据库介绍</h2><blockquote>
<p>数据库是安装在操作系统,可以系统性的存储大量数据的软件.</p>
<p>作用:存储数据,管理数据</p>
</blockquote>
<h2 id="2-数据库的分类"><a href="#2-数据库的分类" class="headerlink" title="2.数据库的分类"></a>2.数据库的分类</h2><ul>
<li><p>SQL 关系型数据库</p>
<ul>
<li>Mysql ,Ocacle,Sql Server,DB2,SQLite</li>
<li>通过表和表,列和列的关系进行数据的存储</li>
</ul>
</li>
<li><p>NOSQL 非关系型数据库</p>
<ul>
<li>Redis,MongDB</li>
<li>非关系型数据库,对象存储,类型JSON或者字典方式存储数据</li>
</ul>
</li>
</ul>
<h2 id="3-命令行初见Mysql"><a href="#3-命令行初见Mysql" class="headerlink" title="3.命令行初见Mysql"></a>3.命令行初见Mysql</h2><h3 id="1-登录"><a href="#1-登录" class="headerlink" title="1.登录"></a>1.登录</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p123456</span><br><span class="line">//-u用户名 -p密码</span><br></pre></td></tr></table></figure>

<p>命令都是以;结尾的</p>
<h3 id="2-查看数据库"><a href="#2-查看数据库" class="headerlink" title="2.查看数据库"></a>2.查看数据库</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show databases;</span><br></pre></td></tr></table></figure>

<h3 id="3-切换数据库"><a href="#3-切换数据库" class="headerlink" title="3.切换数据库"></a>3.切换数据库</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use xxx;</span><br></pre></td></tr></table></figure>

<h3 id="4-查看数据库中的所有表"><a href="#4-查看数据库中的所有表" class="headerlink" title="4.查看数据库中的所有表"></a>4.查看数据库中的所有表</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show tables;</span><br></pre></td></tr></table></figure>

<h3 id="5-显示数据库中所有表的消息"><a href="#5-显示数据库中所有表的消息" class="headerlink" title="5.显示数据库中所有表的消息"></a>5.显示数据库中所有表的消息</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">describe student;</span><br></pre></td></tr></table></figure>

<h3 id="6-退出"><a href="#6-退出" class="headerlink" title="6.退出"></a>6.退出</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exit;</span><br></pre></td></tr></table></figure>



<h2 id="4-操作数据库"><a href="#4-操作数据库" class="headerlink" title="4.操作数据库"></a>4.操作数据库</h2><blockquote>
<p>小提示,如果你的表名或者字段是一个特殊字符需要用``包起来</p>
<p>数据库-&gt;数据表&gt;数据</p>
</blockquote>
<h3 id="1-创建数据库"><a href="#1-创建数据库" class="headerlink" title="1.创建数据库"></a>1.创建数据库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE hello;</span><br><span class="line">CREATE DATABASE IF NOT EXISTS hello;</span><br></pre></td></tr></table></figure>

<h3 id="2-删除数据库"><a href="#2-删除数据库" class="headerlink" title="2.删除数据库"></a>2.删除数据库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP DATABASE IF EXISTS hello;</span><br></pre></td></tr></table></figure>



<h2 id="5-数据库的列类型"><a href="#5-数据库的列类型" class="headerlink" title="5.数据库的列类型"></a>5.数据库的列类型</h2><blockquote>
<p>数值</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">名称</th>
<th align="center">存储数据的大小</th>
<th align="center">占用的字节大小</th>
</tr>
</thead>
<tbody><tr>
<td align="center">tinyint</td>
<td align="center">十分小的数据</td>
<td align="center">1</td>
</tr>
<tr>
<td align="center">smallint</td>
<td align="center">较小的数据</td>
<td align="center">2</td>
</tr>
<tr>
<td align="center">mediumint</td>
<td align="center">中等大小的数据</td>
<td align="center">3</td>
</tr>
<tr>
<td align="center">int</td>
<td align="center">标准的整数(常用)</td>
<td align="center">4</td>
</tr>
<tr>
<td align="center">bigint</td>
<td align="center">较大的数据</td>
<td align="center">8</td>
</tr>
<tr>
<td align="center">float</td>
<td align="center">浮点数</td>
<td align="center">4</td>
</tr>
<tr>
<td align="center">double</td>
<td align="center">浮点数(精度问题)</td>
<td align="center">8</td>
</tr>
<tr>
<td align="center">decimal</td>
<td align="center">字符串形式的浮点数(金融)</td>
<td align="center">9</td>
</tr>
</tbody></table>
<blockquote>
<p>字符串</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">名称</th>
<th align="center">特点</th>
<th align="center">长度范围</th>
</tr>
</thead>
<tbody><tr>
<td align="center">char</td>
<td align="center">字符串固定大小的</td>
<td align="center">0-255</td>
</tr>
<tr>
<td align="center">varchar</td>
<td align="center">可变字符串(常用)</td>
<td align="center">0-65535</td>
</tr>
<tr>
<td align="center">tinytext</td>
<td align="center">微型文本</td>
<td align="center">2^8-1</td>
</tr>
<tr>
<td align="center">text</td>
<td align="center">文本串</td>
<td align="center">2^16-1</td>
</tr>
</tbody></table>
<blockquote>
<p>时间日期</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">名称</th>
<th align="center">格式</th>
</tr>
</thead>
<tbody><tr>
<td align="center">date</td>
<td align="center">YYYY-MM-DD</td>
</tr>
<tr>
<td align="center">time</td>
<td align="center">HH:MM:SS</td>
</tr>
<tr>
<td align="center">datetime</td>
<td align="center">YYYY-MM-DD HH:MM:SS(常用)</td>
</tr>
<tr>
<td align="center">timestamp</td>
<td align="center">时间戳(1970.1.1到现在的毫秒数 常用)</td>
</tr>
</tbody></table>
<blockquote>
<p>null</p>
</blockquote>
<ul>
<li>没有值,未知</li>
<li>==注意,不要使用NULL进行运算</li>
</ul>
<h2 id="6-数据库的字段属性"><a href="#6-数据库的字段属性" class="headerlink" title="6.数据库的字段属性"></a>6.数据库的字段属性</h2><p>Unsigned:</p>
<ul>
<li>无符号的整数</li>
<li>声明了该列不能声明为负数</li>
</ul>
<p>zerofill:</p>
<ul>
<li>0填充</li>
<li>不足的位数,使用0来填充,int(3), 5-&gt;005</li>
</ul>
<p>自增:</p>
<pre><code>*  自动在是一条记录的基础上+1
*  通常来设置唯一的主键 index,必须是整数类型
*  可以自定义设置主键初始值和步长
</code></pre>
<p>非空 NULL not null:</p>
<ul>
<li> 如果不给他赋值,就会报错</li>
</ul>
<p>默认:</p>
<ul>
<li>设置默认的值</li>
</ul>
<p><strong>规范</strong></p>
<p>每个表都必须存在以下五个字段</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">id 主键</span><br><span class="line">&#96;version&#96; 乐观锁</span><br><span class="line">is_delete 伪删除</span><br><span class="line">gmt_create 创建时间</span><br><span class="line">gmt_update 修改时间</span><br></pre></td></tr></table></figure>

<h2 id="7-创建数据表"><a href="#7-创建数据表" class="headerlink" title="7.创建数据表"></a>7.创建数据表</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE IF NOT EXISTS &#96;student&#96;(</span><br><span class="line">   &#96;id&#96; INT(4) NOT NULL AUTO_INCREMENT COMMENT &#39;学号&#39;,</span><br><span class="line">   &#96;name&#96; VARCHAR(20) NOT NULL DEFAULT &#39;匿名&#39; COMMENT &#39;姓名&#39;,</span><br><span class="line">   &#96;pwd&#96; VARCHAR(20) NOT NULL DEFAULT &#39;123456&#39; COMMENT &#39;密码&#39;,</span><br><span class="line">   &#96;birthday&#96; DATETIME DEFAULT NULL COMMENT &#39;出事日期&#39;,</span><br><span class="line">   PRIMARY KEY ( &#96;id&#96; )</span><br><span class="line">)ENGINE&#x3D;InnoDB DEFAULT CHARSET&#x3D;utf8;</span><br><span class="line"></span><br><span class="line">CREATE TABLE [IF NOT EXISTS] &#96;表名&#96;(</span><br><span class="line">	&#96;字段名&#96; 列类型 [属性] [索引] [注释],</span><br><span class="line">)[表类型][字符集设置][注释]</span><br></pre></td></tr></table></figure>



<blockquote>
<p>查看创建数据库的语句</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW CREATE DATABASE xxx;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>查看创建数据表的定义语句</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">SHOW CREATE TABLE xxx;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>显示表的结构</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DESC xxx;</span><br></pre></td></tr></table></figure>

<h2 id="8-数据库引擎的区别"><a href="#8-数据库引擎的区别" class="headerlink" title="8.数据库引擎的区别"></a>8.数据库引擎的区别</h2><ul>
<li>INNODB 默认使用</li>
<li>MYISAM 早些年使用的</li>
</ul>
<table>
<thead>
<tr>
<th align="center">特性</th>
<th align="center">MYISAM</th>
<th align="center">INNODB</th>
</tr>
</thead>
<tbody><tr>
<td align="center">事务支持</td>
<td align="center">不支持</td>
<td align="center">支持</td>
</tr>
<tr>
<td align="center">数据行锁定</td>
<td align="center">不支持</td>
<td align="center">支持</td>
</tr>
<tr>
<td align="center">外键约束</td>
<td align="center">不支持</td>
<td align="center">支持</td>
</tr>
<tr>
<td align="center">全文索引</td>
<td align="center">支持</td>
<td align="center">不支持</td>
</tr>
<tr>
<td align="center">表空间的大小</td>
<td align="center">较小</td>
<td align="center">较大，为两倍</td>
</tr>
</tbody></table>
<p>常规使用操作：</p>
<ul>
<li>MYISAM 节约空间，速度较快</li>
<li>INNODB 安全性高，事务的处理，多表多用户操作</li>
</ul>
<blockquote>
<p>在物理空间存在的位置</p>
</blockquote>
<p>所有数据库文件都存储在data目录下,一个文件夹对应一个数据库</p>
<p>本质还是文件存储</p>
<p>MySQL引擎在物理文件上的区别</p>
<ul>
<li>INNODB 在数据库表中只有一个*.frm文件，以及上级目录下的ibdata1文件</li>
<li>MYISAM 对应文件<ul>
<li>*.frm - 表结构的定义文件</li>
<li>*.MYD 数据文件(data)</li>
<li>*.MYI  索引文件(index)</li>
</ul>
</li>
</ul>
<blockquote>
<p>设置数据库的字符集</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CHARSET&#x3D;utf8</span><br></pre></td></tr></table></figure>

<h2 id="9-修改和删除表"><a href="#9-修改和删除表" class="headerlink" title="9.修改和删除表"></a>9.修改和删除表</h2><h3 id="1-修改表名"><a href="#1-修改表名" class="headerlink" title="1.修改表名"></a>1.修改表名</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE student RENAME lorin</span><br></pre></td></tr></table></figure>

<h3 id="2-增加表的字段"><a href="#2-增加表的字段" class="headerlink" title="2.增加表的字段"></a>2.增加表的字段</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE student ADD age INT(11)</span><br></pre></td></tr></table></figure>

<h3 id="3-修改表的字段"><a href="#3-修改表的字段" class="headerlink" title="3.修改表的字段"></a>3.修改表的字段</h3><ul>
<li>重命名</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE student CHANGE age age1 int(1)</span><br></pre></td></tr></table></figure>

<ul>
<li>修改约束</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE student MODIFY age VARVHAR(11)</span><br></pre></td></tr></table></figure>

<h3 id="4-删除表的字段"><a href="#4-删除表的字段" class="headerlink" title="4.删除表的字段"></a>4.删除表的字段</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE student DROP age</span><br></pre></td></tr></table></figure>

<h3 id="5-删除表"><a href="#5-删除表" class="headerlink" title="5.删除表"></a>5.删除表</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE IF EXISTS student</span><br></pre></td></tr></table></figure>



<p>注意:</p>
<ul>
<li>字段名为了安全使用``包裹起来</li>
<li>注释     –</li>
<li>sql关键字大小写不敏感,建议大家写小写</li>
</ul>
<h2 id="10-MySQL数据库管理"><a href="#10-MySQL数据库管理" class="headerlink" title="10.MySQL数据库管理"></a>10.MySQL数据库管理</h2><h3 id="1-外键-了解即可"><a href="#1-外键-了解即可" class="headerlink" title="1.外键(了解即可)"></a>1.外键(了解即可)</h3><blockquote>
<p>保证数据库的一致性,但是设置数据库层的外键会导致逻辑混乱.建议在应用层解决.</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 定义外键key</span><br><span class="line">KEY &#96;FK_gradeid&#96; (&#96;gradeid&#96;)</span><br><span class="line">-- 给这个外键添加约束(执行引用) 到哪个表的那个键</span><br><span class="line">CONSTRAINT &#96;FK_gradeid&#96; FOREIGN KEY ( &#96;gradeid&#96; ) REFERENCES &#96;grade&#96; ( &#96;gradeid&#96; ) </span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 创建好表折后添加</span><br><span class="line">ALTER TABLE &#96;student&#96; ADD CONSTRAINT &#96;FK_gradeid&#96; FOREIGN KEY(&#96;gradeid&#96;) REFERENCES &#96;grade&#96;(&#96;gradeid&#96;)</span><br></pre></td></tr></table></figure>

<h3 id="2-DML语言-全部记住"><a href="#2-DML语言-全部记住" class="headerlink" title="2.DML语言(全部记住)"></a>2.DML语言(全部记住)</h3><h4 id="1-添加"><a href="#1-添加" class="headerlink" title="1.添加"></a>1.添加</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- INSERT INTO 表名([字段1,字段2]) VALUES(&#39;值1&#39;,&#39;值2&#39;)</span><br><span class="line">-- 插入一条</span><br><span class="line">INSERT INTO &#96;grade&#96; (&#96;gradename&#96;) VALUES(&#39;大四&#39;)</span><br><span class="line">-- 插入多条</span><br><span class="line">INSERT INTO &#96;grade&#96; (&#96;gradename&#96;) VALUES(&#39;大一&#39;),(&#39;大三&#39;)</span><br></pre></td></tr></table></figure>

<h4 id="2-更新"><a href="#2-更新" class="headerlink" title="2.更新"></a>2.更新</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- UPDATE &#96;表名&#96; SET &#96;字段&#96;&#x3D;&#39;codelorin&#39; WHERE 字段&#x3D;1;</span><br><span class="line">UPDATE &#96;grade&#96; SET &#96;gradename&#96;&#x3D;&#39;codelorin&#39; WHERE gradeid&#x3D;1;</span><br><span class="line">-- UPDATE &#96;表名&#96; SET &#96;字段&#96;&#x3D;&#39;codelorin&#39;</span><br><span class="line">-- 这样会修改所有的值</span><br><span class="line"></span><br><span class="line">-- 修改多个</span><br><span class="line">UPDATE &#96;grade&#96; SET &#96;gradename&#96;&#x3D;&#39;codelorin&#39;,xxx&#x3D;xxx WHERE gradeid&#x3D;1;</span><br></pre></td></tr></table></figure>

<p>where子句</p>
<table>
<thead>
<tr>
<th align="center">操作符</th>
<th align="center">含义</th>
<th align="center">范围</th>
<th align="center">结果</th>
</tr>
</thead>
<tbody><tr>
<td align="center">=</td>
<td align="center">等于</td>
<td align="center">5=6</td>
<td align="center">false</td>
</tr>
<tr>
<td align="center">&lt;&gt;或者!=</td>
<td align="center">不低于</td>
<td align="center">5&lt;&gt;6</td>
<td align="center">true</td>
</tr>
<tr>
<td align="center">&gt;</td>
<td align="center">大于</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">&lt;</td>
<td align="center">小于</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">&lt;=</td>
<td align="center">小于等于</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">BETWEEN…AND…</td>
<td align="center">在某个范围内</td>
<td align="center">[2,5]闭区间</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">AND</td>
<td align="center">&amp;&amp;</td>
<td align="center">5&gt;1and 1&gt;2</td>
<td align="center">false</td>
</tr>
<tr>
<td align="center">OR</td>
<td align="center">||</td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<p>注意:</p>
<ul>
<li>数据库的列尽量带上``</li>
<li>条件没有指定会修改所有的列</li>
<li>value是一个具体的值也可以是变量(一般用于时间)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">UPDATE &#96;grade&#96; SET &#96;birthday&#96;&#x3D;CURRENT_TIME WHERE gradeid&#x3D;1;</span><br><span class="line">-- CURRENT_TIME当前时间</span><br></pre></td></tr></table></figure>

<h4 id="3-删除"><a href="#3-删除" class="headerlink" title="3.删除"></a>3.删除</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">-- </span><br><span class="line">DELETE FROM grade WHERE gradeid &#x3D;1</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 删除所有数据</span><br><span class="line">TRUNCATE &#96;grade&#96;</span><br><span class="line">TRUNCATE &#96;表名&#96;</span><br><span class="line">-- 删除所有数据</span><br><span class="line">DELETE FROM grade</span><br></pre></td></tr></table></figure>

<blockquote>
<p>DELETE和TRUNCATE的区别</p>
</blockquote>
<ul>
<li>相同点:都能删除数据,都不会删除表结构</li>
<li>不同点:<ul>
<li>TRUNCATE重新设置自增列 计数器会归零</li>
<li>TRUNCATE 不会影响事务</li>
</ul>
</li>
</ul>
<h3 id="3-DQL查询数据-最重点"><a href="#3-DQL查询数据-最重点" class="headerlink" title="3.DQL查询数据(最重点)"></a>3.DQL查询数据(最重点)</h3><blockquote>
<p>Data Query LANGUAGE: 数据库查询语言</p>
</blockquote>
<ul>
<li>最重要,频率最高的语句</li>
</ul>
<blockquote>
<p>完整语法</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">select xxx from xxx</span><br><span class="line">	join</span><br><span class="line">	where</span><br><span class="line">	group by 分组</span><br><span class="line">	having	过滤</span><br><span class="line">	order by 排序</span><br><span class="line">	limit	限制</span><br></pre></td></tr></table></figure>



<h4 id="1-全部"><a href="#1-全部" class="headerlink" title="1.全部"></a>1.全部</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM &#96;subject&#96;</span><br></pre></td></tr></table></figure>

<h4 id="2-制定字段"><a href="#2-制定字段" class="headerlink" title="2.制定字段"></a>2.制定字段</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM &#96;subject&#96; WHERE &#96;gradeid&#96;&#x3D;1</span><br></pre></td></tr></table></figure>

<h4 id="3-别名"><a href="#3-别名" class="headerlink" title="3. 别名"></a>3. 别名</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- AS起别名</span><br><span class="line">SELECT &#96;studentno&#96; AS 学号,&#96;loginpwd&#96; AS 密码 FROM student </span><br></pre></td></tr></table></figure>

<h4 id="4-函数"><a href="#4-函数" class="headerlink" title="4.函数"></a>4.函数</h4><blockquote>
<p>Concat 连接字符串</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT CONCAT(&#39;姓名:&#39;,studentname) AS 新名字 FROM student</span><br></pre></td></tr></table></figure>

<blockquote>
<p>系统版本</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT VERSION()</span><br></pre></td></tr></table></figure>

<h4 id="5-变量"><a href="#5-变量" class="headerlink" title="5.变量"></a>5.变量</h4><blockquote>
<p>自增</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT @@auto_increment_increment FROM &#96;grade&#96; </span><br></pre></td></tr></table></figure>

<h4 id="6-去重"><a href="#6-去重" class="headerlink" title="6.去重"></a>6.去重</h4><blockquote>
<p>distinct</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT DISTINCT &#96;studentno&#96; FROM result</span><br></pre></td></tr></table></figure>

<h4 id="7-where条件子句"><a href="#7-where条件子句" class="headerlink" title="7.where条件子句"></a>7.where条件子句</h4><blockquote>
<p>逻辑运算符</p>
</blockquote>
<ul>
<li>and &amp;&amp;</li>
<li>or ||</li>
<li>not !</li>
</ul>
<h4 id="8-模糊查询"><a href="#8-模糊查询" class="headerlink" title="8.模糊查询"></a>8.模糊查询</h4><blockquote>
<p>重点</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">运算符</th>
<th align="center">语法</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">IS NULL</td>
<td align="center">a is null</td>
<td align="center">如果操作符为NULL,结果为真</td>
</tr>
<tr>
<td align="center">IS NOT NULL</td>
<td align="center">a is not null</td>
<td align="center">如果操作符不为NULL,结果为真</td>
</tr>
<tr>
<td align="center">BETWEEN</td>
<td align="center">a between b and c</td>
<td align="center">若a在b和c之间,则结果为真</td>
</tr>
<tr>
<td align="center">LIKE</td>
<td align="center">a like b</td>
<td align="center">a相似匹配b</td>
</tr>
<tr>
<td align="center">IN</td>
<td align="center">a in(a1,a2)</td>
<td align="center">假设a在a1或a2其中的某一个,结果为真</td>
</tr>
</tbody></table>
<blockquote>
<p>like结合 %(匹配0到任意一个字符) _(一个字符)</p>
</blockquote>
<h4 id="9-联表查询"><a href="#9-联表查询" class="headerlink" title="9.联表查询"></a>9.联表查询</h4><blockquote>
<p>JOIN</p>
</blockquote>
<blockquote>
<p>on和where的区别</p>
<p>on 是关联条件,where 则是查询条件 </p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/CodeLorin/img/img/20210429234339.png" alt="image-20210429234331783"></p>
<ul>
<li><p>inner join</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT s.studentno,&#96;studentname&#96;,&#96;subjectno&#96;,&#96;studentresult&#96; FROM student as s INNER JOIN result as r WHERE s.studentno&#x3D;r.studentno</span><br></pre></td></tr></table></figure></li>
<li><p>left join</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT s.studentno,&#96;studentname&#96;,&#96;subjectno&#96;,&#96;studentresult&#96; FROM student as s left JOIN result as r ON s.studentno&#x3D;r.studentno</span><br></pre></td></tr></table></figure></li>
<li><p>right join</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT s.studentno,&#96;studentname&#96;,&#96;subjectno&#96;,&#96;studentresult&#96; FROM student as s RIGHT JOIN result as r ON s.studentno&#x3D;r.studentno</span><br></pre></td></tr></table></figure></li>
</ul>
<table>
<thead>
<tr>
<th align="center">操作</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">inner join</td>
<td align="center">两个表的数据都可以拿到</td>
</tr>
<tr>
<td align="center">left join</td>
<td align="center">会从左表返回所有的值,即使右表中没有匹配</td>
</tr>
<tr>
<td align="center">right join</td>
<td align="center">会从右表中返回所有的值,即使左表没有匹配</td>
</tr>
</tbody></table>
<blockquote>
<p>没有匹配实践</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT s.studentno,&#96;studentname&#96;,&#96;subjectno&#96;,&#96;studentresult&#96; FROM student as s RIGHT JOIN result as r ON s.studentno&#x3D;r.studentno where studentresult is NULL</span><br></pre></td></tr></table></figure>

<h4 id="10-自连接"><a href="#10-自连接" class="headerlink" title="10.自连接"></a>10.自连接</h4><blockquote>
<p>自己的表和自己的表连接,核心:一张表拆为两张一样的表即可</p>
</blockquote>
<p>父类</p>
<table>
<thead>
<tr>
<th align="center">categoryid</th>
<th align="center">categoryname</th>
</tr>
</thead>
<tbody><tr>
<td align="center">2</td>
<td align="center">信息技术</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">软件开发</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">美术设计</td>
</tr>
</tbody></table>
<p>子类</p>
<table>
<thead>
<tr>
<th align="center">pid</th>
<th align="center">categoryid</th>
<th align="center">categoryname</th>
</tr>
</thead>
<tbody><tr>
<td align="center">3</td>
<td align="center">4</td>
<td align="center">数据库</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">8</td>
<td align="center">办公信息</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">6</td>
<td align="center">web开发</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">7</td>
<td align="center">pas技术</td>
</tr>
</tbody></table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT a.&#96;categoryname&#96; as &#39;father&#39;,b.&#96;categoryname&#96; as &#39;son&#39; FROM &#96;category&#96; as a,&#96;category&#96; as b WHERE a.&#96;categoryid&#96;&#x3D;b.&#96;pid&#96;</span><br></pre></td></tr></table></figure>

<h4 id="11-分页和排序"><a href="#11-分页和排序" class="headerlink" title="11.分页和排序"></a>11.分页和排序</h4><blockquote>
<p>order by ASC升序 DESC降序</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * from result ORDER BY studentresult DESC</span><br></pre></td></tr></table></figure>

<blockquote>
<p>分页 limit(下标,要几个)</p>
<p>规律: (n-1)*page size,page size</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT * from result</span><br><span class="line">LIMIT 0,2</span><br></pre></td></tr></table></figure>

<h4 id="12-子查询"><a href="#12-子查询" class="headerlink" title="12.子查询"></a>12.子查询</h4><blockquote>
<p>where这个值是计算出来的</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select xx from xx where xx&#x3D;(</span><br><span class="line">	select xx form xx where </span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h4 id="13-函数"><a href="#13-函数" class="headerlink" title="13.函数"></a>13.函数</h4><blockquote>
<p>绝对值</p>
</blockquote>
<p>​    ABS()</p>
<blockquote>
<p>向上取整</p>
</blockquote>
<p>​    CEILING() </p>
<blockquote>
<p>向下取整</p>
</blockquote>
<p>​    FLOOR()</p>
<blockquote>
<p>0-1的随机数</p>
</blockquote>
<p>​    RAND()</p>
<blockquote>
<p>判断一个数的符号 负数返回-1正数返回1</p>
</blockquote>
<p>​    SIGN()</p>
<blockquote>
<p>字符串长度 </p>
</blockquote>
<p>​    CHAR_LENGTH()</p>
<blockquote>
<p>字符串拼接</p>
</blockquote>
<p>​    CONCAT()</p>
<blockquote>
<p>当前时间</p>
</blockquote>
<p> CURRENT_DATE()</p>
<blockquote>
<p>当前日期</p>
</blockquote>
<p>​    CURRENT()</p>
<blockquote>
<p>当前时间</p>
</blockquote>
<p>​    NOW()</p>
<blockquote>
<p>本地时间</p>
</blockquote>
<p>​    LOCALTIME()</p>
<h4 id="14-聚合函数"><a href="#14-聚合函数" class="headerlink" title="14.聚合函数"></a>14.聚合函数</h4><table>
<thead>
<tr>
<th align="center">函数名称</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">COUNT()</td>
<td align="center">计数</td>
</tr>
<tr>
<td align="center">SUM()</td>
<td align="center">求和</td>
</tr>
<tr>
<td align="center">AVG()</td>
<td align="center">平均值</td>
</tr>
<tr>
<td align="center">MAX()</td>
<td align="center">最大值</td>
</tr>
<tr>
<td align="center">MIN()</td>
<td align="center">最小值</td>
</tr>
</tbody></table>
<blockquote>
<p>count()</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">count(xx) 会忽略null</span><br><span class="line">count(*)  不会忽略null</span><br><span class="line">count(1)  不会忽略null</span><br></pre></td></tr></table></figure>



<blockquote>
<p>分组过滤 group by </p>
<p>having</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT studentno,SUM(studentresult) 总成绩 FROM &#96;result&#96; GROUP BY studentno HAVING studentno!&#x3D;1002</span><br></pre></td></tr></table></figure>



<h4 id="15-数据库级别的md5加密"><a href="#15-数据库级别的md5加密" class="headerlink" title="15.数据库级别的md5加密"></a>15.数据库级别的md5加密</h4><blockquote>
<p>md5(xxx)</p>
</blockquote>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p>select 去重 字段 from 表</p>
<p>xx join 连接表 on 等值判断</p>
<p>where</p>
<p>group by 分组</p>
<p>having 过滤</p>
<p>order by 排序</p>
<p>limit 限制</p>
<h2 id="11-事务"><a href="#11-事务" class="headerlink" title="11.事务"></a>11.事务</h2><blockquote>
<p>要不都成功,要不都失败</p>
<p> 将一组sql放入一个批次中去执行</p>
</blockquote>
<blockquote>
<p>事务原则: ACID原则 脏读,幻读</p>
</blockquote>
<ul>
<li>原子性<ul>
<li>要不都成功,要不都失败</li>
</ul>
A给B转账,B收到A转的钱,要不都成功,要不都失败</li>
<li>一致性<ul>
<li>事务前后的数据完整性要保持一致</li>
</ul>
A有800元,B有200元无论怎么转,总价是1000</li>
<li>持久性<ul>
<li>事务结束后数据不随着外部原因导致数据丢失</li>
</ul>
事务没有提交就恢复到原状,提交了就持久化到数据库</li>
<li>隔离性<ul>
<li>多个用户访问数据库时,为每个用户开启事务,事务间互相隔离</li>
</ul>
</li>
</ul>
<blockquote>
<p>隔离的问题</p>
</blockquote>
<p>脏读:</p>
<p>指一个事务读取了另外一个事务没有提交的数据</p>
<p>不可重复读:</p>
<p>一个事务多次读取结果不同,不一定是错误可能是场合不同</p>
<p>虚读(幻读):</p>
<p>一个事物读取别的事务插入的数据,导致前后读取不一致</p>
<p>事务在sql层面的操作</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">set autocommit &#x3D; -- 0 关闭事务</span><br><span class="line">set autocommit &#x3D; -- 1 开启事务(默认的)</span><br><span class="line"></span><br><span class="line">start transaction -- 标记一个事务的开启,一下执行的所有sql都在一个事务内</span><br><span class="line"></span><br><span class="line">insert xx</span><br><span class="line"></span><br><span class="line">-- 提交 持久化(成功)</span><br><span class="line">commit</span><br><span class="line">-- 回滚 回到原来的状态(失败)</span><br><span class="line">rollback</span><br><span class="line">-- 事务结束</span><br><span class="line">set autocommit &#x3D; 1 -- 自动提交</span><br><span class="line"></span><br><span class="line">-- 了解</span><br><span class="line">savepoint -- 设置一个事务的保存点</span><br><span class="line">rollback to savepoint -- 回滚到保存点</span><br><span class="line">release savepoint -- 撤销保存点</span><br></pre></td></tr></table></figure>

<h2 id="12-索引"><a href="#12-索引" class="headerlink" title="12.索引"></a>12.索引</h2><blockquote>
<p>索引是帮助mysql实现高效获取数据的<strong>数据结构</strong></p>
</blockquote>
<h3 id="1-索引的分类"><a href="#1-索引的分类" class="headerlink" title="1.索引的分类"></a>1.索引的分类</h3><ul>
<li>主键索引(PRIMARY KEY)<ul>
<li>唯一的标识,不可重复</li>
</ul>
</li>
<li>唯一索引(UNIQUE KEY)<ul>
<li>避免重复的列出现,唯一索引可以重复,多个列标识位</li>
</ul>
</li>
<li>常规索引(KEY/INDEX)<ul>
<li>默认的,index key关键字来设定</li>
</ul>
</li>
<li>全文索引(FullText)<ul>
<li>快速定位数据</li>
</ul>
</li>
</ul>
<p>用法:</p>
<p>索引名(列名)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table xxx add fulltext index &#96;studentName&#96; (&#96;studentName&#96;)</span><br></pre></td></tr></table></figure>

<h3 id="2-分析sql执行状况"><a href="#2-分析sql执行状况" class="headerlink" title="2.分析sql执行状况"></a>2.分析sql执行状况</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">explain xxxsql语句</span><br><span class="line">explain select * from xx where match(studentName) against(&#39;liu&#39;)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>插入100万条数据测试</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE &#96;app_user&#96; (</span><br><span class="line">&#96;id&#96; BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,</span><br><span class="line">&#96;name&#96; VARCHAR(50) DEFAULT &#39;&#39; COMMENT &#39;用户昵称&#39;,</span><br><span class="line">&#96;email&#96; VARCHAR(50) NOT NULL COMMENT &#39;用户邮箱&#39;,</span><br><span class="line">&#96;phone&#96; VARCHAR(20) DEFAULT &#39;&#39; COMMENT &#39;手机号&#39;,</span><br><span class="line">&#96;gender&#96; TINYINT(4) UNSIGNED DEFAULT 0 COMMENT &#39;性别（0：男;1:女）&#39;,</span><br><span class="line">&#96;password&#96; VARCHAR(100) NOT NULL COMMENT &#39;密码&#39;,</span><br><span class="line">&#96;age&#96; TINYINT(4) DEFAULT 0  COMMENT &#39;年龄&#39;,</span><br><span class="line">&#96;create_time&#96; DATETIME DEFAULT CURRENT_TIMESTAMP,</span><br><span class="line">&#96;update_time&#96; TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,</span><br><span class="line">PRIMARY KEY (&#96;id&#96;)</span><br><span class="line">) ENGINE&#x3D;INNODB DEFAULT CHARSET&#x3D;utf8 COMMENT &#x3D; &#39;app用户表&#39;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER $$</span><br><span class="line">CREATE FUNCTION mock_data()</span><br><span class="line">RETURNS INT</span><br><span class="line">BEGIN</span><br><span class="line">	DECLARE num INT DEFAULT 1000000;</span><br><span class="line">	DECLARE i INT DEFAULT 0;</span><br><span class="line">	WHILE i&lt;num DO</span><br><span class="line">		INSERT INTO &#96;app_user&#96;(&#96;name&#96;,&#96;email&#96;,&#96;phone&#96;,&#96;gender&#96;,&#96;PASSWORD&#96;,&#96;age&#96;)VALUES(CONCAT(&#39;用户&#39;,i),&#39;19224305@qq.com&#39;,123456789,FLOOR(RAND()*2),UUID(),FLOOR(RAND()*100));</span><br><span class="line">		SET i&#x3D;i+1;</span><br><span class="line">	END WHILE;</span><br><span class="line">	RETURN i;</span><br><span class="line">END;</span><br><span class="line"></span><br><span class="line">SELECT mock_data() -- 执行此函数 生成一百万条数据</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 创建索引查看时间差别,数据结构yyds</span><br><span class="line">SELECT * FROM app_user WHERE &#96;name&#96;&#x3D;&#39;用户999999&#39;</span><br><span class="line">CREATE INDEX id_app_user_name ON app_user(&#96;name&#96;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>索引不是越多越好</li>
<li>不要对经常变动的数据增加索引</li>
<li>小数据的表不需要加索引</li>
<li>索引一般常用来查询的字段上</li>
</ul>
<blockquote>
<p>索引的数据结构</p>
</blockquote>
<p>Btree: InnoDB默认的数据类型</p>
<h2 id="13-权限管理"><a href="#13-权限管理" class="headerlink" title="13.权限管理"></a>13.权限管理</h2><h3 id="1-用户管理"><a href="#1-用户管理" class="headerlink" title="1.用户管理"></a>1.用户管理</h3><blockquote>
<p>本质是修改mysql下的user表</p>
</blockquote>
<ul>
<li>创建</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE USER lorin IDENTIFIED BY &#39;123456&#39;</span><br></pre></td></tr></table></figure>

<ul>
<li>修改当前用户</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set password &#x3D; password(&#39;123456&#39;)</span><br></pre></td></tr></table></figure>

<ul>
<li>修改制定用户</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set password for lorin&#x3D;password(&#39;123456&#39;)</span><br></pre></td></tr></table></figure>

<ul>
<li>修改用户名</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename user xxx to xxxx</span><br></pre></td></tr></table></figure>

<ul>
<li>授予用户全部权限</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRANT ALL PRIVILEGES ON *.* TO xxx</span><br></pre></td></tr></table></figure>

<ul>
<li>查询权限</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW GRANTS FOR root @localhost</span><br></pre></td></tr></table></figure>

<ul>
<li>撤销权限</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">REMOVE ALL PRIVILEGES ON *.* FROM xxx</span><br></pre></td></tr></table></figure>

<h2 id="14-数据库的备份"><a href="#14-数据库的备份" class="headerlink" title="14.数据库的备份"></a>14.数据库的备份</h2><blockquote>
<p>保证重要的数据不丢失</p>
<p>数据转移</p>
</blockquote>
<p>数据库命令行备份</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -hlocalhost -uroot -p123456 数据库名称 表 &gt; D:&#x2F;1.sql</span><br></pre></td></tr></table></figure>

<p>数据库加载</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">source d:&#x2F;1.sql</span><br><span class="line">mysql -uroot -p123456 库名&lt;备份文件</span><br></pre></td></tr></table></figure>



<h2 id="15-数据库的设计"><a href="#15-数据库的设计" class="headerlink" title="15.数据库的设计"></a>15.数据库的设计</h2><blockquote>
<p>当数据库比较复杂的时候</p>
</blockquote>
<p>设计数据库步骤:</p>
<ul>
<li>收集信息,分析需求<ul>
<li>用户表(用户登录注销,用户个人信息,写博客,创建分类)</li>
<li>分类表(文章分类,谁创建的)</li>
<li>文章表(文章的信息)</li>
<li>友链表(友链信息)</li>
</ul>
</li>
<li>标识实体(把需求落实到每个字段)</li>
<li>标识实体之间的关系<ul>
<li>写博客:user-&gt;blog</li>
<li>创建分类: user-&gt;category</li>
<li>关注:user-&gt;user</li>
<li>友链: links</li>
<li>评论: user-&gt;user-&gt;blog</li>
</ul>
</li>
</ul>
<h2 id="16-三大范式"><a href="#16-三大范式" class="headerlink" title="16.三大范式"></a>16.三大范式</h2><blockquote>
<p>数据规范化</p>
</blockquote>
<h3 id="1-第一范式"><a href="#1-第一范式" class="headerlink" title="1.第一范式"></a>1.第一范式</h3><blockquote>
<p>原子性:要求每一列都是不可分割的最小原子数据项</p>
</blockquote>
<h3 id="2-第二范式"><a href="#2-第二范式" class="headerlink" title="2.第二范式"></a>2.第二范式</h3><blockquote>
<p>前提满足第一范式</p>
<p>需要保证数据库的每一列都和主键相关,而不能只和主键的某一部分相关</p>
<p>每张表只做一件事</p>
</blockquote>
<h3 id="3-第三范式"><a href="#3-第三范式" class="headerlink" title="3.第三范式"></a>3.第三范式</h3><blockquote>
<p>满足第一,二范式</p>
<p>每一列数据都和主键直接相关而不能间接相关</p>
</blockquote>
<p>关联查询的表不能超过三张表</p>
<ul>
<li>数据库性能在某些情况更加重要</li>
<li>规范性</li>
<li>故意给表增加一些冗余的字段(多表-&gt;单表)</li>
<li>故意增加一些计算列(索引)</li>
</ul>
<h2 id="17-JDBC-重点"><a href="#17-JDBC-重点" class="headerlink" title="17.JDBC(重点)"></a>17.JDBC(重点)</h2><blockquote>
<p>数据库驱动</p>
</blockquote>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/codelorin/img/img/imgimgimage-20210430135328117.png" alt="image-20210430135328117"></p>
<h3 id="1-导入数据库驱动"><a href="#1-导入数据库驱动" class="headerlink" title="1.导入数据库驱动"></a>1.导入数据库驱动</h3><p>新建lib目录</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/CodeLorin/img@master/img/xxx.1ncl3xyml8e8.png" alt="image-20210430163719364"></p>
<p>可以展开即是导入成功</p>
<h3 id="2-代码demo"><a href="#2-代码demo" class="headerlink" title="2.代码demo"></a>2.代码demo</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.codeloirn.jdbc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> CodeLorin</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2021/1/30 16:40</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException, SQLException </span>&#123;</span><br><span class="line">        <span class="comment">//1.加载驱动(固定写法)</span></span><br><span class="line">        Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.用户信息和url</span></span><br><span class="line">        String url = <span class="string">&quot;jdbc:mysql://localhost:3306/jdbcstudy?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=true&quot;</span>;</span><br><span class="line">        <span class="comment">//3.连接成功,数据库对象</span></span><br><span class="line">        String username = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">        String password = <span class="string">&quot;root&quot;</span>;</span><br><span class="line">        Connection connection = DriverManager.getConnection(url, username, password);</span><br><span class="line">        <span class="comment">//4.执行sql的对象</span></span><br><span class="line">        Statement statement = connection.createStatement();</span><br><span class="line">        <span class="comment">//5.执行sql的对象去执行sql,如果存在结果则返回</span></span><br><span class="line">        String sql = <span class="string">&quot;SELECT * FROM users&quot;</span>;</span><br><span class="line">        ResultSet resultSet = statement.executeQuery(sql);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (resultSet.next()) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;id=&quot;</span> + resultSet.getObject(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;NAME=&quot;</span> + resultSet.getObject(<span class="string">&quot;NAME&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;PASSWORD=&quot;</span> + resultSet.getObject(<span class="string">&quot;PASSWORD&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;email=&quot;</span> + resultSet.getObject(<span class="string">&quot;email&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;birthday=&quot;</span> + resultSet.getObject(<span class="string">&quot;birthday&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//6.释放连接</span></span><br><span class="line">        resultSet.close();</span><br><span class="line">        statement.close();</span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>connection</p>
</blockquote>
<p>代表数据库</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">connection.setAutoCommit();<span class="comment">//设置自动提交</span></span><br><span class="line">connection.commit();<span class="comment">//事务提交  </span></span><br><span class="line">connection.rollback();<span class="comment">//事务回滚 </span></span><br></pre></td></tr></table></figure>



<blockquote>
<p>statement</p>
</blockquote>
<p>执行sql</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">statement.executeQuery();<span class="comment">//查询操作返回ResultSet</span></span><br><span class="line">statement.execute();<span class="comment">//执行任何sql</span></span><br><span class="line">statement.executeUpdate();<span class="comment">//更新插入删除,返回收到影响的行数</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>ResultSet</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">resultset.getObjest();<span class="comment">//不知道类型</span></span><br><span class="line"></span><br><span class="line">resultset.getString();<span class="comment">//知道类型</span></span><br><span class="line">resultset.getDate();</span><br></pre></td></tr></table></figure>

<blockquote>
<p>close 释放连接</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">resultSet.close();</span><br><span class="line">statement.close();</span><br><span class="line">connection.close();</span><br></pre></td></tr></table></figure>

<h3 id="3-CURD"><a href="#3-CURD" class="headerlink" title="3.CURD"></a>3.CURD</h3><h4 id="1-create"><a href="#1-create" class="headerlink" title="1.create"></a>1.create</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Statement statement = connection.createStatement();</span><br><span class="line">String sql = <span class="string">&quot;insert into user() values()&quot;</span>;</span><br><span class="line"><span class="keyword">int</span> num = statement.executeUpdate(sql);</span><br><span class="line"><span class="keyword">if</span>(num&gt;<span class="number">0</span>)&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;success!&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-update"><a href="#2-update" class="headerlink" title="2.update"></a>2.update</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Statement statement = connection.createStatement();</span><br><span class="line">String sql = <span class="string">&quot;update user set name =&#x27;&#x27; where name =&#x27;&#x27;&quot;</span>;</span><br><span class="line"><span class="keyword">int</span> num = statement.executeUpdate(sql);</span><br><span class="line"><span class="keyword">if</span>(num&gt;<span class="number">0</span>)&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;success!&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-read"><a href="#3-read" class="headerlink" title="3.read"></a>3.read</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Statement statement = connection.createStatement();</span><br><span class="line">String sql = <span class="string">&quot;SELECT * FROM users&quot;</span>;</span><br><span class="line">ResultSet resultSet = statement.executeQuery(sql);</span><br><span class="line"><span class="keyword">while</span> (resultSet.next()) &#123;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-delete"><a href="#4-delete" class="headerlink" title="4.delete"></a>4.delete</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Statement statement = connection.createStatement();</span><br><span class="line">String sql = <span class="string">&quot;delete from user where id=1&quot;</span>;</span><br><span class="line"><span class="keyword">int</span> num = statement.executeUpdate(sql);</span><br><span class="line"><span class="keyword">if</span>(num&gt;<span class="number">0</span>)&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;success!&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-提取工具类"><a href="#4-提取工具类" class="headerlink" title="4.提取工具类"></a>4.提取工具类</h3><blockquote>
<p>properties</p>
</blockquote>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://localhost:3306/jdbcstudy?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=true</span></span><br><span class="line"><span class="attr">username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Utils</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.codeloirn.jdbc2.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcUtils</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String driver = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String url = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String username = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String password = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            InputStream inputStream = JdbcUtils.class.getClassLoader().getResourceAsStream(<span class="string">&quot;db.properties&quot;</span>);</span><br><span class="line">            Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">            properties.load(inputStream);</span><br><span class="line">            driver = properties.getProperty(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">            url = properties.getProperty(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">            username = properties.getProperty(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">            password = properties.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">            Class.forName(driver);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException | ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取连接</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> DriverManager.getConnection(url, username, password);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//释放资源</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">release</span><span class="params">(Connection conn, Statement st, ResultSet rs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (rs != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                rs.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (st != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                st.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (conn != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                conn.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>main</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.codeloirn.jdbc2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.codeloirn.jdbc2.utils.JdbcUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcStudy</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        Statement st = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JdbcUtils.getConnection();</span><br><span class="line">            st = conn.createStatement();</span><br><span class="line">            String sql = <span class="string">&quot;INSERT users VALUES(7,&#x27;codelorin&#x27;,123,&#x27;admin@l.cn&#x27;,&#x27;1980-12-04&#x27;)&quot;</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> i = st.executeUpdate(sql);</span><br><span class="line">            <span class="keyword">if</span> (i &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;success!&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            JdbcUtils.release(conn, st, <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-sql注入"><a href="#5-sql注入" class="headerlink" title="5.sql注入"></a>5.sql注入</h3><blockquote>
<p>安全问题</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.codeloirn.jdbc2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.codeloirn.jdbc2.utils.JdbcUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcStudy</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String username = <span class="string">&quot;&#x27;or&#x27; 1=1&quot;</span>; <span class="comment">//&#x27; or &#x27; 1=1 &#x27;-- &#x27;</span></span><br><span class="line">        String password = <span class="string">&quot;&#x27;or&#x27; 1=1&quot;</span>;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        Statement st = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JdbcUtils.getConnection();</span><br><span class="line">            st = conn.createStatement();</span><br><span class="line">            String sql = <span class="string">&quot;SELECT * FROM `users` WHERE `name`=&#x27;&quot;</span> + username + <span class="string">&quot;&#x27; and `password` =&#x27;&quot;</span> + password + <span class="string">&quot;&#x27;&quot;</span>;</span><br><span class="line">            ResultSet resultSet = st.executeQuery(sql);</span><br><span class="line">            <span class="keyword">while</span> (resultSet.next()) &#123;</span><br><span class="line">                System.out.println(resultSet.getObject(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">                System.out.println(resultSet.getObject(<span class="string">&quot;password&quot;</span>));</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            JdbcUtils.release(conn, st, <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>由于sql的逻辑运算符的原因,存在sql注入漏洞,会被攻击导致数据泄露.</p>
</blockquote>
<h3 id="6-解决sql注入问题"><a href="#6-解决sql注入问题" class="headerlink" title="6.解决sql注入问题"></a>6.解决sql注入问题</h3><blockquote>
<p>增删改</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.codeloirn.jdbc3;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.codeloirn.jdbc2.utils.JdbcUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//st</span></span><br><span class="line">        PreparedStatement st = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JdbcUtils.getConnection();</span><br><span class="line">            <span class="comment">//预编译</span></span><br><span class="line">            String sql = <span class="string">&quot;INSERT INTO users(id,`name`,`password`,`email`,`birthday`) VALUES(?,?,?,?,?)&quot;</span>;</span><br><span class="line">            st = conn.prepareStatement(sql);</span><br><span class="line">            st.setInt(<span class="number">1</span>, <span class="number">10</span>);</span><br><span class="line">            st.setString(<span class="number">2</span>, <span class="string">&quot;lorin&quot;</span>);</span><br><span class="line">            st.setString(<span class="number">3</span>, <span class="string">&quot;123321&quot;</span>);</span><br><span class="line">            st.setString(<span class="number">4</span>, <span class="string">&quot;codelorin@163.com&quot;</span>);</span><br><span class="line">            st.setDate(<span class="number">5</span>, <span class="keyword">new</span> java.sql.Date(<span class="keyword">new</span> Date().getTime()));</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> i = st.executeUpdate();</span><br><span class="line">            <span class="keyword">if</span> (i &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;success!&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            JdbcUtils.release(conn, st, <span class="keyword">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>查</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.codeloirn.jdbc2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.codeloirn.jdbc2.utils.JdbcUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcStudy</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String username = <span class="string">&quot;codelorin&quot;</span>;</span><br><span class="line">        String password = <span class="string">&quot;123&quot;</span>;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//st</span></span><br><span class="line">        PreparedStatement st = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JdbcUtils.getConnection();</span><br><span class="line">			<span class="comment">//预编译</span></span><br><span class="line">            String sql = <span class="string">&quot;SELECT * FROM `users` WHERE `name`=? and `password`=?&quot;</span>;</span><br><span class="line">            st = conn.prepareStatement(sql);</span><br><span class="line"></span><br><span class="line">            st.setString(<span class="number">1</span>, username);</span><br><span class="line">            st.setString(<span class="number">2</span>, password);</span><br><span class="line">            rs = st.executeQuery();</span><br><span class="line">            <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">                System.out.println(rs.getObject(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">                System.out.println(rs.getObject(<span class="string">&quot;password&quot;</span>));</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            JdbcUtils.release(conn, st, <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="18-事务问题"><a href="#18-事务问题" class="headerlink" title="18.事务问题"></a>18.事务问题</h2><blockquote>
<p>ACID原则</p>
</blockquote>
<p>原子性:要不都完成,要不都失败</p>
<p>一致性:总数不变</p>
<p>隔离性:多个进程互补干扰</p>
<p>持久性:一旦提交不可逆,持久化到数据库了</p>
<blockquote>
<p>隔离性的问题</p>
</blockquote>
<p>脏读:一个事务读取了另外一个没有提交的事务</p>
<p>不可重复读:在同一个事务内,重复读取表中的数据,表数据发生了改变</p>
<p>虚读(幻读):在一个事务内,读取到了别人插入的数据,导致前后读出来的结果不一致</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.codeloirn;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.codeloirn.jdbc2.utils.JdbcUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> CodeLorin</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2021/4/30 23:56</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TransactionDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement st = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JdbcUtils.getConnection();</span><br><span class="line">            <span class="comment">//关闭自动提交,开启事务</span></span><br><span class="line">            conn.setAutoCommit(<span class="keyword">false</span>);</span><br><span class="line">            String sql1 = <span class="string">&quot;update account set money = money-100 where name =&#x27;A&#x27;&quot;</span>;</span><br><span class="line">            st = conn.prepareStatement(sql1);</span><br><span class="line">            st.executeUpdate();</span><br><span class="line">            String sql2 = <span class="string">&quot;update account set money = money+100 where name =&#x27;B&#x27;&quot;</span>;</span><br><span class="line">            st = conn.prepareStatement(sql2);</span><br><span class="line">            st.executeUpdate();</span><br><span class="line">            </span><br><span class="line">            <span class="comment">//业务完成,提交事务</span></span><br><span class="line">            conn.commit();</span><br><span class="line">            System.out.println(<span class="string">&quot;success&quot;</span>);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">//失败回滚</span></span><br><span class="line">                conn.rollback();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e1) &#123;</span><br><span class="line">                e1.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            JdbcUtils.release(conn, st, <span class="keyword">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="19-数据库连接池"><a href="#19-数据库连接池" class="headerlink" title="19.数据库连接池"></a>19.数据库连接池</h2><blockquote>
<p>数据库连接完毕,执行完毕,释放</p>
<p>连接释放十分浪费资源</p>
</blockquote>
<p><strong>池化技术:准备一些预先的资源,过来就连接预先准备好的</strong></p>
<p>最小连接数:10</p>
<p>最大连接数:15</p>
<p>等待超时:100ms</p>
<p>编写连接池,实现DataSource接口</p>
<p>DBCP</p>
<p>C3P0</p>
<p>Druid:阿里巴巴</p>
<p>使用这些数据库连接池,我们就不需要编写连接数据库的代码了!</p>
<blockquote>
<p>DBCP</p>
</blockquote>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#连接设置</span></span><br><span class="line"><span class="attr">driverClassName</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://localhost:3306/jdbcstudy?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=true</span></span><br><span class="line"><span class="attr">username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">root</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#!-- 初始化连接 --</span></span><br><span class="line"><span class="attr">initialSize</span>=<span class="string">10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#最大连接数量</span></span><br><span class="line"><span class="attr">maxActive</span>=<span class="string">50</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#!-- 最大空闲连接 --</span></span><br><span class="line"><span class="attr">maxIdle</span>=<span class="string">20</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#!-- 最小空闲连接 --</span></span><br><span class="line"><span class="attr">minIdle</span>=<span class="string">5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#!-- 超时等待时间以毫秒为单位 6000毫秒/1000等于60秒 --</span></span><br><span class="line"><span class="attr">maxWait</span>=<span class="string">60000</span></span><br><span class="line"><span class="comment">#JDBC驱动建立连接时附带的连接属性属性的格式必须为这样：【属性名=property;】</span></span><br><span class="line"><span class="comment">#注意：user 与 password 两个属性会被明确地传递，因此这里不需要包含他们。</span></span><br><span class="line"><span class="attr">connectionProperties</span>=<span class="string">useUnicode=true;characterEncoding=UTF8</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#指定由连接池所创建的连接的自动提交（auto-commit）状态。</span></span><br><span class="line"><span class="attr">defaultAutoCommit</span>=<span class="string">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#driver default 指定由连接池所创建的连接的只读（read-only）状态。</span></span><br><span class="line"><span class="comment">#如果没有设置该值，则“setReadOnly”方法将不被调用。（某些驱动并不支持只读模式，如：Informix）</span></span><br><span class="line"><span class="attr">defaultReadOnly</span>=<span class="string"></span></span><br><span class="line"></span><br><span class="line"><span class="comment">#driver default 指定由连接池所创建的连接的事务级别（TransactionIsolation）。</span></span><br><span class="line"><span class="comment">#可用值为下列之一：（详情可见javadoc。）NONE,READ_UNCOMMITTED, READ_COMMITTED, REPEATABLE_READ, SERIALIZABLE</span></span><br><span class="line"><span class="attr">defaultTransactionIsolation</span>=<span class="string">READ_UNCOMMITTED</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>Dbcp工具类实现</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.codeloirn.dbcp.utils;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.dbcp.BasicDataSourceFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> CodeLorin</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2021/4/30 17:41</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcUtilsDbcp</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> DataSource dataSource = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            InputStream inputStream = JdbcUtilsDbcp.class.getClassLoader().getResourceAsStream(<span class="string">&quot;dbcpconfig.properties&quot;</span>);</span><br><span class="line">            Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">            properties.load(inputStream);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//创建数据源</span></span><br><span class="line">            dataSource = BasicDataSourceFactory.createDataSource(properties);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取连接</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> dataSource.getConnection();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//释放资源</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">release</span><span class="params">(Connection conn, Statement st, ResultSet rs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (rs != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                rs.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (st != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                st.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (conn != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                conn.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<blockquote>
<p>demo</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.codeloirn.dbcp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.codeloirn.dbcp.utils.JdbcUtilsDbcp;</span><br><span class="line"><span class="keyword">import</span> com.codeloirn.jdbc2.utils.JdbcUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> CodeLorin</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2021/4/30 20:05</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement st = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JdbcUtilsDbcp.getConnection();</span><br><span class="line">            String sql = <span class="string">&quot;INSERT INTO users(id,`name`,`password`,`email`,`birthday`) VALUES(?,?,?,?,?)&quot;</span>;</span><br><span class="line">            st = conn.prepareStatement(sql);</span><br><span class="line">            st.setInt(<span class="number">1</span>, <span class="number">12</span>);</span><br><span class="line">            st.setString(<span class="number">2</span>, <span class="string">&quot;lorin111&quot;</span>);</span><br><span class="line">            st.setString(<span class="number">3</span>, <span class="string">&quot;123321&quot;</span>);</span><br><span class="line">            st.setString(<span class="number">4</span>, <span class="string">&quot;codelorin@163.com&quot;</span>);</span><br><span class="line">            st.setDate(<span class="number">5</span>, <span class="keyword">new</span> java.sql.Date(<span class="keyword">new</span> Date().getTime()));</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> i = st.executeUpdate();</span><br><span class="line">            <span class="keyword">if</span> (i &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;success!&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            JdbcUtilsDbcp.release(conn, st, <span class="keyword">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">CodeLorin</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://www.codelorin.cn/posts/c40ae4b5eafd/">https://www.codelorin.cn/posts/c40ae4b5eafd/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://www.codelorin.cn" target="_blank">CodeLorin's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><a class="post-meta__tags" href="/tags/Mysql/">Mysql</a><a class="post-meta__tags" href="/tags/JDBC/">JDBC</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/CodeLorin/img@master/20210425/xxx.17r1ntktik1s.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/posts/4dc97b6bc1ae/"><img class="next-cover" data-lazy-src="https://cdn.jsdelivr.net/gh/CodeLorin/img@master/20210425/xxx.5y782v8ukv40.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">正则表达式</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" data-lazy-src="https://cdn.jsdelivr.net/gh/CodeLorin/img@master/20210425/xxx.6b4667utjuc0.jfif" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">CodeLorin</div><div class="author-info__description">不能自律，何以正人</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">16</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">30</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">26</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/CodeLorin"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/CodeLorin" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:codelorin@163.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content"><div><img class="site-author-image nolazy" src="https://cdn.jsdelivr.net/gh/CodeLorin/img/img/20200920031343.gif">本站已经全站启用pjax</div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.</span> <span class="toc-text">1.数据库介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">2.</span> <span class="toc-text">2.数据库的分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%88%9D%E8%A7%81Mysql"><span class="toc-number">3.</span> <span class="toc-text">3.命令行初见Mysql</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%99%BB%E5%BD%95"><span class="toc-number">3.1.</span> <span class="toc-text">1.登录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">3.2.</span> <span class="toc-text">2.查看数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%88%87%E6%8D%A2%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">3.3.</span> <span class="toc-text">3.切换数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%9A%84%E6%89%80%E6%9C%89%E8%A1%A8"><span class="toc-number">3.4.</span> <span class="toc-text">4.查看数据库中的所有表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%98%BE%E7%A4%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E6%89%80%E6%9C%89%E8%A1%A8%E7%9A%84%E6%B6%88%E6%81%AF"><span class="toc-number">3.5.</span> <span class="toc-text">5.显示数据库中所有表的消息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E9%80%80%E5%87%BA"><span class="toc-number">3.6.</span> <span class="toc-text">6.退出</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">4.</span> <span class="toc-text">4.操作数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">4.1.</span> <span class="toc-text">1.创建数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">4.2.</span> <span class="toc-text">2.删除数据库</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%88%97%E7%B1%BB%E5%9E%8B"><span class="toc-number">5.</span> <span class="toc-text">5.数据库的列类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%AD%97%E6%AE%B5%E5%B1%9E%E6%80%A7"><span class="toc-number">6.</span> <span class="toc-text">6.数据库的字段属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E8%A1%A8"><span class="toc-number">7.</span> <span class="toc-text">7.创建数据表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BC%95%E6%93%8E%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">8.</span> <span class="toc-text">8.数据库引擎的区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E4%BF%AE%E6%94%B9%E5%92%8C%E5%88%A0%E9%99%A4%E8%A1%A8"><span class="toc-number">9.</span> <span class="toc-text">9.修改和删除表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BF%AE%E6%94%B9%E8%A1%A8%E5%90%8D"><span class="toc-number">9.1.</span> <span class="toc-text">1.修改表名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%A2%9E%E5%8A%A0%E8%A1%A8%E7%9A%84%E5%AD%97%E6%AE%B5"><span class="toc-number">9.2.</span> <span class="toc-text">2.增加表的字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E4%BF%AE%E6%94%B9%E8%A1%A8%E7%9A%84%E5%AD%97%E6%AE%B5"><span class="toc-number">9.3.</span> <span class="toc-text">3.修改表的字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%88%A0%E9%99%A4%E8%A1%A8%E7%9A%84%E5%AD%97%E6%AE%B5"><span class="toc-number">9.4.</span> <span class="toc-text">4.删除表的字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%88%A0%E9%99%A4%E8%A1%A8"><span class="toc-number">9.5.</span> <span class="toc-text">5.删除表</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86"><span class="toc-number">10.</span> <span class="toc-text">10.MySQL数据库管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%A4%96%E9%94%AE-%E4%BA%86%E8%A7%A3%E5%8D%B3%E5%8F%AF"><span class="toc-number">10.1.</span> <span class="toc-text">1.外键(了解即可)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-DML%E8%AF%AD%E8%A8%80-%E5%85%A8%E9%83%A8%E8%AE%B0%E4%BD%8F"><span class="toc-number">10.2.</span> <span class="toc-text">2.DML语言(全部记住)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%B7%BB%E5%8A%A0"><span class="toc-number">10.2.1.</span> <span class="toc-text">1.添加</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%9B%B4%E6%96%B0"><span class="toc-number">10.2.2.</span> <span class="toc-text">2.更新</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%88%A0%E9%99%A4"><span class="toc-number">10.2.3.</span> <span class="toc-text">3.删除</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-DQL%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE-%E6%9C%80%E9%87%8D%E7%82%B9"><span class="toc-number">10.3.</span> <span class="toc-text">3.DQL查询数据(最重点)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%85%A8%E9%83%A8"><span class="toc-number">10.3.1.</span> <span class="toc-text">1.全部</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%88%B6%E5%AE%9A%E5%AD%97%E6%AE%B5"><span class="toc-number">10.3.2.</span> <span class="toc-text">2.制定字段</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%88%AB%E5%90%8D"><span class="toc-number">10.3.3.</span> <span class="toc-text">3. 别名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%87%BD%E6%95%B0"><span class="toc-number">10.3.4.</span> <span class="toc-text">4.函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E5%8F%98%E9%87%8F"><span class="toc-number">10.3.5.</span> <span class="toc-text">5.变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E5%8E%BB%E9%87%8D"><span class="toc-number">10.3.6.</span> <span class="toc-text">6.去重</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-where%E6%9D%A1%E4%BB%B6%E5%AD%90%E5%8F%A5"><span class="toc-number">10.3.7.</span> <span class="toc-text">7.where条件子句</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2"><span class="toc-number">10.3.8.</span> <span class="toc-text">8.模糊查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-%E8%81%94%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="toc-number">10.3.9.</span> <span class="toc-text">9.联表查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-%E8%87%AA%E8%BF%9E%E6%8E%A5"><span class="toc-number">10.3.10.</span> <span class="toc-text">10.自连接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-%E5%88%86%E9%A1%B5%E5%92%8C%E6%8E%92%E5%BA%8F"><span class="toc-number">10.3.11.</span> <span class="toc-text">11.分页和排序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">10.3.12.</span> <span class="toc-text">12.子查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-%E5%87%BD%E6%95%B0"><span class="toc-number">10.3.13.</span> <span class="toc-text">13.函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#14-%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="toc-number">10.3.14.</span> <span class="toc-text">14.聚合函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BA%A7%E5%88%AB%E7%9A%84md5%E5%8A%A0%E5%AF%86"><span class="toc-number">10.3.15.</span> <span class="toc-text">15.数据库级别的md5加密</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">10.3.16.</span> <span class="toc-text">总结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E4%BA%8B%E5%8A%A1"><span class="toc-number">11.</span> <span class="toc-text">11.事务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E7%B4%A2%E5%BC%95"><span class="toc-number">12.</span> <span class="toc-text">12.索引</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">12.1.</span> <span class="toc-text">1.索引的分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%88%86%E6%9E%90sql%E6%89%A7%E8%A1%8C%E7%8A%B6%E5%86%B5"><span class="toc-number">12.2.</span> <span class="toc-text">2.分析sql执行状况</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"><span class="toc-number">13.</span> <span class="toc-text">13.权限管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86"><span class="toc-number">13.1.</span> <span class="toc-text">1.用户管理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%A4%87%E4%BB%BD"><span class="toc-number">14.</span> <span class="toc-text">14.数据库的备份</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E8%AE%BE%E8%AE%A1"><span class="toc-number">15.</span> <span class="toc-text">15.数据库的设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-%E4%B8%89%E5%A4%A7%E8%8C%83%E5%BC%8F"><span class="toc-number">16.</span> <span class="toc-text">16.三大范式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%AC%AC%E4%B8%80%E8%8C%83%E5%BC%8F"><span class="toc-number">16.1.</span> <span class="toc-text">1.第一范式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%AC%AC%E4%BA%8C%E8%8C%83%E5%BC%8F"><span class="toc-number">16.2.</span> <span class="toc-text">2.第二范式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%AC%AC%E4%B8%89%E8%8C%83%E5%BC%8F"><span class="toc-number">16.3.</span> <span class="toc-text">3.第三范式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-JDBC-%E9%87%8D%E7%82%B9"><span class="toc-number">17.</span> <span class="toc-text">17.JDBC(重点)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE%E5%BA%93%E9%A9%B1%E5%8A%A8"><span class="toc-number">17.1.</span> <span class="toc-text">1.导入数据库驱动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%BB%A3%E7%A0%81demo"><span class="toc-number">17.2.</span> <span class="toc-text">2.代码demo</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-CURD"><span class="toc-number">17.3.</span> <span class="toc-text">3.CURD</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-create"><span class="toc-number">17.3.1.</span> <span class="toc-text">1.create</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-update"><span class="toc-number">17.3.2.</span> <span class="toc-text">2.update</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-read"><span class="toc-number">17.3.3.</span> <span class="toc-text">3.read</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-delete"><span class="toc-number">17.3.4.</span> <span class="toc-text">4.delete</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%8F%90%E5%8F%96%E5%B7%A5%E5%85%B7%E7%B1%BB"><span class="toc-number">17.4.</span> <span class="toc-text">4.提取工具类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-sql%E6%B3%A8%E5%85%A5"><span class="toc-number">17.5.</span> <span class="toc-text">5.sql注入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E8%A7%A3%E5%86%B3sql%E6%B3%A8%E5%85%A5%E9%97%AE%E9%A2%98"><span class="toc-number">17.6.</span> <span class="toc-text">6.解决sql注入问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#18-%E4%BA%8B%E5%8A%A1%E9%97%AE%E9%A2%98"><span class="toc-number">18.</span> <span class="toc-text">18.事务问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#19-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0"><span class="toc-number">19.</span> <span class="toc-text">19.数据库连接池</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/c40ae4b5eafd/" title="Mysql数据库"><img data-lazy-src="https://cdn.jsdelivr.net/gh/CodeLorin/img@master/20210425/xxx.17r1ntktik1s.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Mysql数据库"/></a><div class="content"><a class="title" href="/posts/c40ae4b5eafd/" title="Mysql数据库">Mysql数据库</a><time datetime="2021-04-28T15:29:38.000Z" title="发表于 2021-04-28 23:29:38">2021-04-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/4dc97b6bc1ae/" title="正则表达式"><img data-lazy-src="https://cdn.jsdelivr.net/gh/CodeLorin/img@master/20210425/xxx.5y782v8ukv40.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="正则表达式"/></a><div class="content"><a class="title" href="/posts/4dc97b6bc1ae/" title="正则表达式">正则表达式</a><time datetime="2021-04-27T03:30:59.000Z" title="发表于 2021-04-27 11:30:59">2021-04-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/def272cea73f/" title="java多线程"><img data-lazy-src="https://cdn.jsdelivr.net/gh/CodeLorin/img@master/20210425/xxx.158czlxepo68.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="java多线程"/></a><div class="content"><a class="title" href="/posts/def272cea73f/" title="java多线程">java多线程</a><time datetime="2021-04-27T03:29:42.000Z" title="发表于 2021-04-27 11:29:42">2021-04-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/b12955a527b0/" title="less学习"><img data-lazy-src="https://cdn.jsdelivr.net/gh/CodeLorin/img@master/20210425/xxx.73jltsl71b00.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="less学习"/></a><div class="content"><a class="title" href="/posts/b12955a527b0/" title="less学习">less学习</a><time datetime="2021-04-27T03:22:34.000Z" title="发表于 2021-04-27 11:22:34">2021-04-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/93ceb07fd09c/" title="flask框架快速入门"><img data-lazy-src="https://cdn.jsdelivr.net/gh/CodeLorin/img@master/20210425/xxx.4otesxko7zs0.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="flask框架快速入门"/></a><div class="content"><a class="title" href="/posts/93ceb07fd09c/" title="flask框架快速入门">flask框架快速入门</a><time datetime="2021-04-27T03:19:11.000Z" title="发表于 2021-04-27 11:19:11">2021-04-27</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.jsdelivr.net/gh/CodeLorin/img@master/20210425/xxx.17r1ntktik1s.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By CodeLorin</div><div class="github-badge"><a style="color: #fff" rel="license" href="https://hexo.io/" target="_blank" title="由 Hexo 强力驱动"><span class="badge-subject">Powered</span><span class="badge-value bg-blue">Hexo</span></a><a style="color: #fff" rel="license" href="https://github.com/" target="_blank" title="静态网页托管于 GitHub Pages"><span class="badge-subject">Hosted</span><span class="badge-value bg-brightgreen">GitHub</span></a><a style="color: #fff" rel="license" href="https://twikoo.js.org/" target="_blank" title="Twikoo提供评论支持"><span class="badge-subject">Comment</span><span class="badge-value bg-orange">Twikoo</span></a><a style="color: #fff" rel="license" href="https://butterfly.js.org/" target="_blank" title="站点使用 Butterfly主题"><span class="badge-subject">Theme</span><span class="badge-value bg-blue">Butterfly</span></a><a style="color: #fff" rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" title="本站点采用知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议进行许可"><span class="badge-subject"><i class="fa fa-copyright"></i></span><span class="badge-value bg-lightgrey">BY-NC-SA 4.0</span></a></div><div id="running-time"><script>setInterval(()=>{let create_time=Math.round(new Date('2020-05-05 00:00:00').getTime()/1000);let timestamp=Math.round((new Date().getTime()+8*60*60*1000)/1000);let second=timestamp-create_time;let time=new Array(0,0,0,0,0);if(second>=365*24*3600){time[0]=parseInt(second/(365*24*3600));second%=365*24*3600;}if(second>=24*3600){time[1]=parseInt(second/(24*3600));second%=24*3600;}if(second>=3600){time[2]=parseInt(second/3600);second%=3600;}if(second>=60){time[3]=parseInt(second/60);second%=60;}if(second>0){time[4]=second;}currentTimeHtml='本站已安全运行 '+time[0]+' 年 '+time[1]+' 天 '+time[2]+' 时 '+time[3]+' 分 '+time[4]+' 秒';document.getElementById("running-time").innerHTML=currentTimeHtml;},1000);</script></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(()=>{
  const $countDom = document.getElementById('twikoo-count')
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'twikoo-3g8k2vq48c2d24ae',
      region: ''
    }, null))
  }

  const getCount = () => {
    twikoo.getCommentsCount({
      envId: 'twikoo-3g8k2vq48c2d24ae',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      $countDom.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const loadTwikoo = (bool = false) => {
    if (typeof twikoo === 'object') {
      init()
      bool && $countDom && setTimeout(getCount,0)
    } else {
      getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(()=> {
        init()
        bool && $countDom && setTimeout(getCount,0)
      })
    }
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo(true)
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'twikoo-3g8k2vq48c2d24ae',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script>setInterval(()=>{let create_time=Math.round(new Date('2020-05-05 00:00:00').getTime()/1000);let timestamp=Math.round((new Date().getTime()+8*60*60*1000)/1000);let second=timestamp-create_time;let time=new Array(0,0,0,0,0);if(second>=365*24*3600){time[0]=parseInt(second/(365*24*3600));second%=365*24*3600;}if(second>=24*3600){time[1]=parseInt(second/(24*3600));second%=24*3600;}if(second>=3600){time[2]=parseInt(second/3600);second%=3600;}if(second>=60){time[3]=parseInt(second/60);second%=60;}if(second>0){time[4]=second;}currentTimeHtml='本站已安全运行 '+time[0]+' 年 '+time[1]+' 天 '+time[2]+' 时 '+time[3]+' 分 '+time[4]+' 秒';document.getElementById("running-time").innerHTML=currentTimeHtml;},1000);</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async="async" mobile="false"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config-diff',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})


document.addEventListener('pjax:send', function () {
  typeof preloader === 'object' && preloader.initLoading()
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --> <script data-pjax>if(document.getElementById('recent-posts') && location.pathname =='/'){
    
    var parent = document.getElementById('recent-posts');
    var child = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="https://cdn.jsdelivr.net/gh/CodeLorin/img@master/20210425/xxx.13fyr3c6vekg.jpg" alt="https://cdn.jsdelivr.net/gh/CodeLorin/img@master/20210425/xxx.13fyr3c6vekg.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2021-04-26</span><a class="blog-slider__title" href="posts/6275c3b43a36/">Vue.js基础学习</a><div class="blog-slider__text">Vue.js基础学习</div><a class="blog-slider__button" href="posts/6275c3b43a36/">详情</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="https://cdn.jsdelivr.net/gh/CodeLorin/img@master/20210425/xxx.1l4xfz527e4g.jpg" alt="https://cdn.jsdelivr.net/gh/CodeLorin/img@master/20210425/xxx.1l4xfz527e4g.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2021-04-27</span><a class="blog-slider__title" href="posts/60229e7c7527/">AJAX在各种框架下的使用</a><div class="blog-slider__text">AJAX在各种框架下的使用</div><a class="blog-slider__button" href="posts/60229e7c7527/">详情</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="https://cdn.jsdelivr.net/gh/CodeLorin/img/img/Snipaste_2021-04-29_13-54-46.png" alt="https://cdn.jsdelivr.net/gh/CodeLorin/img/img/Snipaste_2021-04-29_13-54-46.png"/></div><div class="blog-slider__content"><span class="blog-slider__code">2020-09-24</span><a class="blog-slider__title" href="posts/28649b6f0095/">为你的hexo博客添加全局吸底并且收入侧边栏的Aplayer</a><div class="blog-slider__text">为你的hexo博客添加全局吸底并且收入侧边栏的Aplayer</div><a class="blog-slider__button" href="posts/28649b6f0095/">详情</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="https://cdn.jsdelivr.net/gh/CodeLorin/img@master/20210425/xxx.73jltsl71b00.jpg" alt="https://cdn.jsdelivr.net/gh/CodeLorin/img@master/20210425/xxx.73jltsl71b00.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2021-04-27</span><a class="blog-slider__title" href="posts/b12955a527b0/">less学习</a><div class="blog-slider__text">less学习</div><a class="blog-slider__button" href="posts/b12955a527b0/">详情</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="https://cdn.jsdelivr.net/gh/CodeLorin/img@master/20210425/xxx.7hywli18wt00.jpg" alt="https://cdn.jsdelivr.net/gh/CodeLorin/img@master/20210425/xxx.7hywli18wt00.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2021-04-25</span><a class="blog-slider__title" href="posts/2dfcc54038e4/">Centos系统环境搭建</a><div class="blog-slider__text">Centos系统环境搭建</div><a class="blog-slider__button" href="posts/2dfcc54038e4/">详情</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="https://cdn.jsdelivr.net/gh/CodeLorin/img@master/20210425/xxx.158czlxepo68.jpg" alt="https://cdn.jsdelivr.net/gh/CodeLorin/img@master/20210425/xxx.158czlxepo68.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2021-04-27</span><a class="blog-slider__title" href="posts/def272cea73f/">java多线程</a><div class="blog-slider__text">java多线程</div><a class="blog-slider__button" href="posts/def272cea73f/">详情</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="https://cdn.jsdelivr.net/gh/CodeLorin/img@master/20210424/xxx.2z9ks4ocq9g0.jpg" alt="https://cdn.jsdelivr.net/gh/CodeLorin/img@master/20210424/xxx.2z9ks4ocq9g0.jpg"/></div><div class="blog-slider__content"><span class="blog-slider__code">2020-05-05</span><a class="blog-slider__title" href="posts/d5bec4482fb2/">HelloWorld</a><div class="blog-slider__text">HelloWorld</div><a class="blog-slider__button" href="posts/d5bec4482fb2/">详情</a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('已挂载swiper')
    parent.insertAdjacentHTML("afterbegin",child)}
     </script>
<script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper/swiper/swiper.min.js"></script>
<script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper@0.18/swiper/swiperindex.js"></script>
<style></style>
  <script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/hexo-github-calendar@1.21/hexo_githubcalendar.js"></script>
  <script data-pjax>
        function GithubCalendarConfig(){
            var git_githubapiurl ="https://python-github-calendar-api.vercel.app/api?CodeLorin";
            var git_color =['#f2f8fc', '#e2f0fa', '#d6ebfa', '#c2e2f8', '#add9f7', '#9dd5fa', '#88cbf8', '#6fc1f7', '#53b1f0', '#3dabf5', '#1b9ff7'];
            var git_user ="CodeLorin";
            var parent_div_git = document.getElementById('recent-posts');
            var git_div_html = '<div class="recent-post-item" style="width:100%;height:auto;padding:10px;"><div id="github_loading" style="width:10%;height:100%;margin:0 auto;display: block"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform></path></svg></div><div id="github_container"></div></div>';
            if(parent_div_git && location.pathname =='/'){
                console.log('已挂载github calendar')
                // parent_div_git.innerHTML=git_div_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",git_div_html) // 有报错，但不影响使用(支持pjax跳转)
            };
            GithubCalendar(git_githubapiurl,git_color,git_user)
        }
        if(document.getElementById('recent-posts')){
            GithubCalendarConfig()
        }
    </script>
    <style>#github_container{min-height:280px}@media screen and (max-width:650px) {#github_container{background-image:;min-height:0px}}</style>
    <style></style><!-- hexo injector body_end end --></body></html>